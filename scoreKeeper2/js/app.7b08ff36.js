(function(e){function t(t){for(var r,a,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},s={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-9b6cb078":"c417608c"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-9b6cb078":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-9b6cb078":"3af51534"}[e]+".css",s=c.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===s))return t()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){l=p[o],u=l.getAttribute("data-href");if(u===r||u===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],d.parentNode.removeChild(d),n(i)},d.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){a[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var p=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}s[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/scoreKeeper2/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var d=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0c96":function(e,t,n){},"2b7e":function(e,t,n){"use strict";var r=n("32d1"),a=n.n(r);a.a},"32d1":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},6159:function(e,t,n){"use strict";var r=n("9115"),a=n.n(r);a.a},9115:function(e,t,n){},"9c0c":function(e,t,n){},"9ee2":function(e,t,n){"use strict";var r=n("0c96"),a=n.n(r);a.a},ae85:function(e,t,n){"use strict";n("4de4");var r=n("2b0e");t["a"]=r["a"].extend({props:{players:Array},methods:{getPlayerRank:function(e){return this.players.filter((function(t){return t.score>e.score})).length+1}}})},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a=n("2b0e"),s=n("289d"),i=(n("5abe"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{type:"is-dark"}},[n("template",{slot:"brand"},[n("b-navbar-item",{staticClass:"is-primary",attrs:{tag:"router-link",to:{path:"/"}}},[e._v(" ScoreKeeper ")])],1),n("template",{slot:"end"},[n("b-navbar-item",{attrs:{tag:"div"}},[n("div",{staticClass:"buttons"},[n("a",{staticClass:"button is-primary"},[e._v(" About ")])])])],1)],2),n("div",{staticClass:"container"},[n("router-view")],1)],1)}),o=[],c=(n("5c0b"),n("2877")),l={},u=Object(c["a"])(l,i,o,!1,null,null,null),p=u.exports,d=(n("d3b7"),n("8c4f")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("game-form",{attrs:{"finish-line":e.finishLine},on:{sync:e.SyncData,"add-player":e.addPlayer}}),e.quickScoreOptions?n("game-quick-score",{attrs:{options:e.quickScoreOptions},on:{"quick-score":e.onQuickScore}}):e._e(),n("player-table",{attrs:{players:e.players,"current-player":e.currentPlayer,step:e.step},on:{sync:e.SyncData}}),n("section",{staticClass:"buttons is-centered"},e._l(e.gameButtons,(function(t){return n("b-button",{attrs:{disabled:t.disabled(),"icon-left":t.icon},on:{click:function(n){return e.$buefy.dialog.confirm({message:"Are you sure ?",onConfirm:t.callback})}}},[e._v(" "+e._s(t.label)+" ")])})),1),n("game-logs",{attrs:{players:e.playersNames()}})],1)},h=[],m=(n("a623"),n("4160"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("2532"),n("498a"),n("159b"),n("5530")),y=n("b66e"),b=n("2ef0"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-field",{attrs:{label:"Add a player"}},[n("b-input",{attrs:{placeholder:"Name"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPlayer(t)}},model:{value:e.pendingPlayerName,callback:function(t){e.pendingPlayerName=t},expression:"pendingPlayerName"}})],1),n("b-field",{attrs:{label:"Step"}},[n("b-numberinput",{attrs:{min:"0"},on:{input:function(t){e.$emit("sync","step",Number(e.step))}},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}})],1),n("div",{staticClass:"field"},[n("b-checkbox",{attrs:{value:this.finishLine.enabled},on:{input:e.toggleFinishLine}},[e._v("Finish line")]),n("b-numberinput",{directives:[{name:"show",rawName:"v-show",value:this.finishLine.enabled,expression:"this.finishLine.enabled"}],ref:"finishLineField",attrs:{value:this.finishLine.value},on:{input:e.updateFinishLineValue}})],1)],1)},g=[],E=10,P="finishLine",S=a["a"].extend({name:"GameForm",props:{finishLine:Object},data:function(){return{pendingPlayerName:"",step:E}},methods:{toggleFinishLine:function(e){this.$refs.finishLineField.focus(),this.$emit("sync",[P,"enabled"],e)},addPlayer:function(){this.$emit("add-player",this.pendingPlayerName),this.pendingPlayerName=""},updateFinishLineValue:function(e){this.$emit("sync",[P,"value"],e)}}}),_=S,O=Object(c["a"])(_,v,g,!1,null,null,null),k=O.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttons is-centered"},e._l(e.options,(function(t){return n("b-button",{key:t,attrs:{size:"is-large"},on:{click:function(n){return e.$emit("quick-score",t)}}},[e._v(e._s(t))])})),1)},R=[],w={name:"GameQuickScore",props:{options:Array}},L=w,j=Object(c["a"])(L,N,R,!1,null,null,null),x=j.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("b-table",{attrs:{data:e.players,striped:!0,hoverable:!0,selected:e.selected,focusable:""},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{label:"Rank",width:"40",numeric:""}},[e._v(" "+e._s(e.getPlayerRank(t.row))+" ")]),n("b-table-column",{attrs:{field:"name",label:"Name"}},[e._v(" "+e._s(t.row.name)+" ")]),n("b-table-column",{attrs:{label:"Score",centered:""}},[n("span",{staticClass:"tag is-primary"},[e._v(" "+e._s(t.row.score)+" ")])]),n("b-table-column",{attrs:{label:"Add"}},[n("b-button",{attrs:{"icon-left":"plus-circle",type:"is-primary"},on:{click:function(n){return e.addPoints(t.row)}}})],1),n("b-table-column",{attrs:{label:"Substract"}},[n("b-button",{attrs:{"icon-left":"minus-circle",type:"is-primary"},on:{click:function(n){return e.reducePoints(t.row)}}})],1),n("b-table-column",{attrs:{label:"Reset"}},[n("b-button",{attrs:{"icon-left":"redo",type:"is-primary"},on:{click:function(n){return e.resetPlayerScore(t.row)}}})],1),n("b-table-column",{attrs:{label:"Remove"}},[n("b-button",{attrs:{"icon-left":"trash-alt",type:"is-danger"},on:{click:function(n){e.$buefy.dialog.confirm({message:"Are you sure you want to remove "+t.row.name+" from the game ?",onConfirm:e.removePlayer.bind(this,t.row)})}}})],1)]}}])},[n("template",{slot:"empty"},[n("section",{staticClass:"section"},[n("div",{staticClass:"content has-text-grey has-text-centered"},[n("p",[n("b-icon",{attrs:{icon:"frown",size:"is-large"}})],1),n("p",[e._v("No players yet.")])])])])],2)],1)},A=[],C=(n("c740"),n("a434"),n("a9e3"),n("d4ec")),$=n("bee2"),G=function(){function e(t){Object(C["a"])(this,e),this.score=0,this.name=t}return Object($["a"])(e,[{key:"resetScore",value:function(){this.score=0}},{key:"addPoints",value:function(e){this.score+=e}},{key:"setScore",value:function(e){return this.score=e,this}}]),e}();(function(e){e["POINTS"]="POINTS",e["SCORE_RESET"]="SCORE_RESET",e["SCORES_RESET"]="SCORES_RESET",e["GAME_RESET"]="GAME_RESET",e["NEW_TURN"]="NEW_TURN",e["PLAYER_REMOVED"]="PLAYER_REMOVED",e["PLAYER_JOINED"]="PLAYER_JOINED"})(r||(r={}));var I,M=r,D=n("ae85"),F=D["a"].extend({name:"PlayerTable",props:{step:Number,currentPlayer:G},computed:{selected:{get:function(){return this.currentPlayer},set:function(e){this.$emit("sync","currentPlayer",e)}}},methods:{removePlayer:function(e){var t=this.players.findIndex((function(t){return t===e}));this.players.splice(t,1),this.sendRemovePlayerEvents(e),this.$buefy.toast.open({message:"".concat(e.name," has been removed from the game."),type:"is-info"})},sendRemovePlayerEvents:function(e){this.$emit("sync","players",this.players),this.emitLogEvent({type:M.PLAYER_REMOVED,data:{player:e.name}})},resetPlayerScore:function(e){e.resetScore(),this.emitLogEvent({type:M.SCORE_RESET,data:{player:e.name}})},addPoints:function(e){e.addPoints(this.step),this.emitLogEvent({type:M.POINTS,data:{player:e.name,points:this.step}})},reducePoints:function(e){e.addPoints(-this.step),this.emitLogEvent({type:M.POINTS,data:{player:e.name,points:-this.step}})}}}),J=F,q=(n("2b7e"),Object(c["a"])(J,T,A,!1,null,null,null)),Y=q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Logs")]),n("b-select",{staticClass:"has-text-centered",attrs:{placeholder:"Select a name"},model:{value:e.filterPlayer,callback:function(t){e.filterPlayer=t},expression:"filterPlayer"}},[n("option",{attrs:{value:"",selected:""}},[e._v("All")]),e._l(e.players,(function(t){return n("option",{domProps:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2),n("ul",e._l([].concat(e.filteredHistory).reverse(),(function(t){return n("li",[e._v(" "+e._s(e.formatMessage(t))+" ")])})),0)],1)},B=[],K=(n("99af"),n("4de4"),n("ade3"));function Q(e){return Object(K["a"])({},e,{handler:function(t){localStorage[e]=JSON.stringify(t)},deep:!0})}var U=(I={},Object(K["a"])(I,M.POINTS,(function(e){return"".concat(e.player," has ").concat(e.points<0?"lost":"won","\n                                                  ").concat(Math.abs(e.points)," points")})),Object(K["a"])(I,M.SCORE_RESET,(function(e){return"".concat(e.player,"'s score has been reset")})),Object(K["a"])(I,M.SCORES_RESET,(function(e){return"Scores have been reset"})),Object(K["a"])(I,M.GAME_RESET,(function(e){return"Game has been reset"})),Object(K["a"])(I,M.NEW_TURN,(function(e){return"Turn: ".concat(e.turn)})),Object(K["a"])(I,M.PLAYER_REMOVED,(function(e){return"".concat(e.player," has been removed")})),Object(K["a"])(I,M.PLAYER_JOINED,(function(e){return"".concat(e.player," has joined the game!")})),I),H=a["a"].extend({name:"GameLogs",props:{players:Array},mounted:function(){var e=this;this.$root.$on("log-event",(function(t){e.events.push(t)})),this.$root.$on("game-cleared",(function(){e.events=[]})),this.loadEventsFromStorage()},data:function(){return{events:[],filterPlayer:""}},methods:{formatMessage:function(e){return U[e.type](e.data)},loadEventsFromStorage:function(){var e=localStorage.events;e&&(this.events=JSON.parse(e))}},computed:{filteredHistory:function(){var e=this;return this.filterPlayer?this.events.filter((function(t){var n;return(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.player)===e.filterPlayer})):this.events}},watch:Q("events")}),W=H,z=(n("6159"),Object(c["a"])(W,V,B,!1,null,"786b2d59",null)),Z=z.exports,X=a["a"].extend({name:"Game",components:{GameForm:k,GameQuickScore:x,PlayerTable:Y,GameLogs:Z},mounted:function(){localStorage.players&&(this.players=JSON.parse(localStorage.players).map((function(e){return new G(e.name).setScore(e.score)})))},data:function(){return{players:[],step:E,finishLine:{enabled:!1,value:50},quickScoreOptions:Object(b["range"])(13),currentPlayer_:null}},computed:{gameButtons:function(){return[{label:"Reset Scores",callback:this.resetScores,disabled:this.areAllScoresAtZero,icon:"redo"},{label:"Clear game",callback:this.clearGame,disabled:this.hasNoPlayers,icon:"trash"},{label:"End game",callback:this.endGame,disabled:this.hasNoPlayers,icon:"step-forward"}]},currentPlayer:{get:function(){return this.hasNoPlayers()?null:this.currentPlayer_||this.players[0]},set:function(e){this.currentPlayer_=e}},scores:function(){return Object(b["map"])(this.players,"score")}},methods:{onQuickScore:function(e){this.currentPlayer.addPoints(e),this.emitLogEvent({type:M.POINTS,data:{player:this.currentPlayer.name,points:e}}),this.nextPlay()},nextPlay:function(){var e=this.players.indexOf(this.currentPlayer);this.currentPlayer=this.players[(e+1)%this.players.length]},SyncData:function(e,t){Object(b["set"])(this,e,t)},addPlayer:function(e){e=this.checkPlayerName(e),this.players.push(new G(this.checkPlayerName(e))),this.emitLogEvent({type:M.PLAYER_JOINED,data:{player:e}})},resetScores:function(e){var t=e.withEvent,n=void 0===t||t;this.players.forEach((function(e){return e.resetScore()})),n&&this.emitLogEvent({type:M.SCORES_RESET})},clearGame:function(){this.players=[],this.$root.$emit("game-cleared")},endGame:function(){this.$router.push({name:"Result",params:{players:this.players}})},areAllScoresAtZero:function(){return this.players.every((function(e){return 0===e.score}))},hasNoPlayers:function(){return 0===this.players.length},checkPlayerName:function(e){if(!this.isInvalidPlayerName(e))return e;do{var t=Object(b["sample"])([[y["a"],y["b"]],[y["c"],y["b"]],[y["d"]]]);e=Object(y["e"])({dictionaries:t,separator:" ",length:t.length})}while(this.isInvalidPlayerName(e));return e},isInvalidPlayerName:function(e){return!e.trim()||this.playersNames().includes(e)},playersNames:function(){return Object(b["map"])(this.players,"name")}},watch:Object(m["a"])({scores:function(e){this.finishLine.enabled&&Object(b["max"])(e)>=this.finishLine.value&&this.endGame()}},Q("players")),beforeRouteEnter:function(e,t,n){n((function(e){"Result"===t.name&&e.resetScores({withEvent:!1})}))}}),ee=X,te=(n("9ee2"),Object(c["a"])(ee,f,h,!1,null,"493d0096",null)),ne=te.exports;a["a"].use(d["a"]);var re=[{path:"/",name:"Game",component:ne},{path:"/result",name:"Result",component:function(){return n.e("chunk-9b6cb078").then(n.bind(null,"3de1"))},props:!0},{path:"*",redirect:"/"}],ae=new d["a"]({mode:"history",base:"/scoreKeeper2/",routes:re}),se=ae;a["a"].use(s["a"],{defaultIconPack:"fas"}),a["a"].mixin({methods:{emitLogEvent:function(e){this.$root.$emit("log-event",e)}}}),a["a"].config.productionTip=!1,new a["a"]({router:se,render:function(e){return e(p)}}).$mount("#app")}});
//# sourceMappingURL=app.7b08ff36.js.map